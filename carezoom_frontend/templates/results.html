{% extends "index.html" %}

{% block title %}
    Results
{% endblock %}

{% block main %}
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<style>
	body {
  font-family: 'PT Serif', serif;
  color: white;
}

.continents-wrap {
  float: left;
  width: 20%;
  margin: 0 5% 0 0;
  padding: 0;
}

.flowers-wrap {
  float: left;
  width: 20%;
  margin: 0 5% 0 0;
  padding: 0;
  position: relative;
}

.flowers {
  float: left;
  width: 100%;
}

.flowers div {
  text-align: center;
  width: 100%;
  height: 68px;
  line-height: 68px;
  padding: 0 5%;
  margin: 0 0 1px;
  position: relative;
  color:white;
}

h3 {
    display: inline;
    font-size: 1em;
    margin-left: 0;
    margin-right: 0;
    width:200px;
    font-weight: bold;
    text-align: left;
    line-height: 67px;
    padding-left: 10px;

}
.accordion {
    background-color: #f2e2e1;
    color: #000;
    cursor: pointer;
    padding: 0px;
    width: 200px;
    border: none;
    text-align: left;
    outline: none;

    transition: 0.4s;

}

.active, .accordion:hover {
    background-color: #ba4444;
    color:white;
}

.accordion:after {
    content: '\002B';
    color: black;
    font-weight: bold;
    float: right;
    margin-left: 5px;
    padding: 20px 0;
    padding-right: 10px;
}

.active:after {
    content: "\2212";
    color:white;
    padding-right: 10px;

}

.panel {
    padding: 0 0px;
    background-color: #ba4444;
    max-height: 0;
    color: white;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
    padding-left: 10px;
    padding-right: 10px;
    width: 200px;
}

article {
    display: grid;
    grid-template-columns: 70px 200px 10px 1000px 1000px;
}
article > * {
    grid-column: 4;
}

article > flowers-wraps {
    grid-column: 2 ;
    margin: 20px 0;
}

</style>
<h2 style="text-align:center">Search Results</h2><br>
<pre id=result> </pre>
<article>

<div class="flowers-wrap" style="grid-column: 2">
  	<br><br>
  <button class="accordion"><h3> Intervention Budget</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="$0-500" id="$0-500" /> $0-500</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="$500-1000" id="$500-1000" /> $500-1000</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="$1K to 5K" id="$1K to 5K" /> $1K to 5K</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="$5K to 10K" id="$5K to 10K" /> $5K to 10K</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="$10K to 25K" id="$10K to 25K" /> $10K to 25K</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="$25K to 50K" id="$25K to 50K" /> $25K to 50K</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="$50K to 100K" id="$50K to 100K" /> $50K to 100K</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="$100K to 500K" id="$100K to 500K" /> $100K to 500K</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="$500K to 1M" id="$500K to 1M" /> $500K to 1M</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value=">$1M" id=">$1M" /> >$1M</label>
  </form> </div>

  <button class="accordion"><h3> Type of organization</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Academic Hospital" id="Academic Hospital" /> Academic Hospital</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Integrated healthcare system/network" id="Integrated healthcare system/network" /> Integrated healthcare system/network</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Community" id="Community" /> Community Hospital</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Community outpatient clinic" id="Community outpatient clinic" /> Community outpatient clinic</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Community health center" id="Community health center" /> Community health center</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Home-based care" id="Home-based care" /> Home-based care</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Subacute rehab" id="Subacute rehab" /> Subacute rehab</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Skilled nursing facility" id="Skilled nursing facility" /> Skilled nursing facility</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Urgent care" id="Urgent care" /> Urgent care</label>
       <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Community organization" id="Community organization" /> Community organization</label>
  </form>
</div>

<button class="accordion"><h3> EMR or other Tech Used</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="tiny" id="tiny" /> Epic</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="small" id="small" /> Cerner</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="medium" id="medium" /> ECW</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="large" id="large" /> Redcap</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Microsoft Office</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> iPads/Tablets</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Paper and pen</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Tonic</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Athena Health</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Desktops/label>
  </form>
</div>

<button class="accordion"><h3> Geographic Location</h3></button>
  <div class="panel">
  <p style="font-size:12px;"><strong>Filter flowers by size:</strong></p>
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="tiny" id="tiny" /> Suburb</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="small" id="small" /> Urban</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="medium" id="medium" /> Rurual</label>
  </form>
</div>

<button class="accordion"><h3> Demographics served</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="tiny" id="tiny" /> Immigrants</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="small" id="small" /> Rural</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="medium" id="medium" /> Upper middle class/wealthy</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="large" id="large" /> Working class</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Women</label>
  </form>
</div>

<button class="accordion"><h3> Insurance Types accepted</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="tiny" id="tiny" /> Medicaid</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="small" id="small" /> Medicare</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="medium" id="medium" /> Commercial/private</label>
  </form>
</div>

<button class="accordion"><h3> Staff involved</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="tiny" id="tiny" /> MD/DO</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="small" id="small" /> RN</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="medium" id="medium" /> LPN</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="large" id="large" /> NP</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> PA</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> PT/OT</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Social Worker</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Pharmacist</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Students</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Community Health worker</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="giant" id="giant" /> Administrative assistant/project manager</label>
  </form>
</div>
<button class="accordion"><h3> PCMH</h3></button>
  <div class="panel">
  <p style="font-size:12px;"><strong>Filter flowers by size:</strong></p>
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="tiny" id="tiny" /> YES</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="small" id="small" /> NO</label>
  </form>
</div>
</div>


<div class="container" style="align-items: flex-start; width:100%">
	<div class="flowers">
  {% for r in results %}

  			<div class="flower" data_id="{{r.title}}" data-category="{{r.filter}}">
    		<form action="/intervention" method="post">

  				<h2><input type="submit" name="sub" value= "{{r.title}}" ></input></h2>
			</form>
    		

			<h4 font-size=20px>{{r.overview}}</h4></div>
			<br><br>

    {% endfor %}
</div>
</div>

</article>

<script>
	var $filterCheckboxes = $('input[type="checkbox"]');

$filterCheckboxes.on('change', function() {

  var selectedFilters = {};

  $filterCheckboxes.filter(':checked').each(function() {

    if (!selectedFilters.hasOwnProperty(this.name)) {
      selectedFilters[this.name] = [];
    }

    selectedFilters[this.name].push(this.value);

  });

  // create a collection containing all of the filterable elements
  var $filteredResults = $('.flower');

  // loop over the selected filter name -> (array) values pairs
  $.each(selectedFilters, function(name, filterValues) {

    // filter each .flower element
    $filteredResults = $filteredResults.filter(function() {

      var matched = false,
        currentFilterValues = $(this).data('category').split(' ');

      // loop over each category value in the current .flower's data-category
      $.each(currentFilterValues, function(_, currentFilterValue) {

        // if the current category exists in the selected filters array
        // set matched to true, and stop looping. as we're ORing in each
        // set of filters, we only need to match once

        if ($.inArray(currentFilterValue, filterValues) != -1) {
          matched = true;
          return false;
        }
      });

      // if matched is true the current .flower element is returned
      return matched;

    });
  });

  $('.flower').hide().filter($filteredResults).show();

});

var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
  acc[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.maxHeight){
      panel.style.maxHeight = null;
    } else {
      panel.style.maxHeight = panel.scrollHeight + "px";
    } 
  });
}
</script>




{% endblock %}
