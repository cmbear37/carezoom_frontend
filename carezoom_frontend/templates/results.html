{% extends "index.html" %}

{% block title %}
    Results
{% endblock %}

{% block main %}
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<style>
	body {
  font-family: 'PT Serif', serif;
  color: white;
}

.continents-wrap {
  float: left;
  width: 20%;
  margin: 0 5% 0 0;
  padding: 0;
}

.flowers-wrap {
  float: left;
  width: 20%;
  margin: 0 5% 0 0;
  padding: 0;
  position: relative;
}

.flowers {
  float: left;
  width: 100%;
}

.flowers div {
  text-align: center;
  width: 100%;
  height: 68px;
  line-height: 68px;
  padding: 0 5%;
  margin: 0 0 1px;
  position: relative;
  color:white;
}

h3 {
    display: inline;
    font-size: 1em;
    margin-left: 0;
    margin-right: 0;
    width:200px;
    font-weight: bold;
    text-align: left;
    line-height: 67px;
    padding-left: 10px;

}
.accordion {
    background-color: #f2e2e1;
    color: #000;
    cursor: pointer;
    padding: 0px;
    width: 200px;
    border: none;
    text-align: left;
    outline: none;

    transition: 0.4s;

}

.active, .accordion:hover {
    background-color: #ba4444;
    color:white;
}

.accordion:after {
    content: '\002B';
    color: black;
    font-weight: bold;
    float: right;
    margin-left: 5px;
    padding: 20px 0;
    padding-right: 10px;
}

.active:after {
    content: "\2212";
    color:white;
    padding-right: 10px;

}

.panel {
    padding: 0 0px;
    background-color: #ba4444;
    max-height: 0;
    color: white;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
    padding-left: 10px;
    padding-right: 10px;
    width: 200px;
}

article {
    display: grid;
    grid-template-columns: 70px 200px 10px 1000px 1000px;
}
article > * {
    grid-column: 4;
}

article > flowers-wraps {
    grid-column: 2 ;
    margin: 20px 0;
}

</style>
<h2 style="text-align:center">Search Results</h2><br>
<pre id=result> </pre>
<article>
<div class="flowers-wrap" style="grid-column: 2">
  	<br><br>
  <button class="accordion"><h3> Intervention Budget</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="1" id="$0-500" /> $0-500</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="2" id="$500-1000" /> $500-1000</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="3" id="$1K to 5K" /> $1K to 5K</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="4" id="$5K to 10K" /> $5K to 10K</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="5" id="$10K to 25K" /> $10K to 25K</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="6" id="$25K to 50K" /> $25K to 50K</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="7" id="$50K to 75K" /> $50K to 75K</label>
      <br>
     <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="8" id="$75K to 100K" /> $75K to 100K</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="9" id="$100K to 500K" /> $100K to 500K</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="10" id="$500K to 1M" /> $500K to 1M</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-colour" value="11" id=">$1M" /> >$1M</label>
  </form> </div>

  <button class="accordion"><h3> Type of organization</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="achosp" id="Academic Hospital" /> Academic Hospital</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="intsyst" id="Integrated healthcare system/network" /> Integrated healthcare system/network</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="commhosp" id="Community" /> Community Hospital</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="commclinic" id="Community outpatient clinic" /> Community outpatient clinic</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="CHC" id="Community health center" /> Community health center</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="homecare" id="Home-based care" /> Home-based care</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="subacute" id="Subacute rehab" /> Subacute rehab</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="skillednurs" id="Skilled nursing facility" /> Skilled nursing facility</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="urgcare" id="Urgent care" /> Urgent care</label>
       <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="commorg" id="Community organization" /> Community organization</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="safety" id="Community organization" /> Safety Net Hospital</label>
  </form>
</div>

<button class="accordion"><h3> EMR or other Tech Used</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="Epic" id="Epic" /> Epic</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="Cerner" value="Cerner" id="small" /> Cerner</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="ECW" value="ECW" id="medium" /> E-Clinical Works</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="Redcap" value="Redcap" id="large" /> Redcap</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="Microsoft" value="Microsoft Office" id="Microsoft" /> Microsoft Office</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="iPads" value="iPads" id="giant" /> iPads/Tablets</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="Paper" value="Paper" id="Paper" /> Paper and pen</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="Tonic" value="Tonic" id="Tonic" /> Tonic</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="Desktop" value="Desktop" id="Desktop" /> Desktops</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="registry" value="registry" id="registry" /> EMR-based registry</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="EMR" value="EMR" id="EMR" /> Electronic medical record</label>
  </form>
</div>

<button class="accordion"><h3> Geographic Location</h3></button>
  <div class="panel">
  <p style="font-size:12px;"><strong>Filter flowers by size:</strong></p>
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="suburb" value="suburb" id="suburb" /> Suburb</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="urban" value="urban" id="urban" /> Urban</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="rural" value="rural" id="rural" /> Rural</label>
  </form>
</div>

<button class="accordion"><h3> Demographics served</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="immigrants" value="immigrants" id="immigrants" /> Immigrants</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="rural" value="rural" id="rural" /> Rural</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="upper" value="upper" id="upper" /> Upper middle class/wealthy</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="working" value="working" id="working" /> Working class</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="women" value="women" id="women" /> Women</label>
  </form>
</div>

<button class="accordion"><h3> Insurance Types accepted</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="Medicaid" value="Medicaid" id="Medicaid" /> Medicaid</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="Medicare" value="Medicare" id="Medicare" /> Medicare</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="commercial" value="commercial" id="commercial" /> Commercial/private</label>
  </form>
</div>

<button class="accordion"><h3> Staff involved</h3></button>
  <div class="panel">
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="MD/DO" value="MD/DO" id="MD/DO" /> Physicians</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="RNs" value="RNs" id="RNs" /> RNs</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="LPNs" value="LPNs" id="LPNs" /> LPNs</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="NPs" value="NPs" id="NPs" /> NPs</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="PAs" value="PAs" id="PAs" /> PAs</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="PT" value="PT" id="PT" /> PT</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="OT" value="OT" id="OT" /> OT</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="SW" value="SW" id="SW" /> Social Worker</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="Pharm" value="Pharm" id="Pharm" /> Pharmacist</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="Trainee" value="Trainee" id="Trainee" /> Clicial Trainee or Student</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="CHW" value="CHW" id="CHW" /> Community Health worker</label>
      <br>
      <label style="font-size:12px;">
      <input type="checkbox" name="Pophealth" value="Pophealth" id="Pophealth" /> Population Health Coordinator</label>
      <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="AA" value="AA" id="AA" /> Administrative assistant</label>
  </form>
</div>
<button class="accordion"><h3> PCMH</h3></button>
  <div class="panel">
  <p style="font-size:12px;"><strong>Filter flowers by size:</strong></p>
  <form>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="tiny" id="tiny" /> YES</label>
    <br>
    <label style="font-size:12px;">
      <input type="checkbox" name="fl-size" value="small" id="small" /> NO</label>
  </form>
</div>
</div>


<div class="container" style="align-items: flex-start; width:100%">
	<div class="flowers">
  {% for r in results %}

  			<div class="flower" data_id="{{r.title}}" data-category="{{r.filter}}">
    		<form action="/intervention" method="post">

  				<h2><input type="submit" name="sub" value= "{{r.title}}" ></input></h2>
			</form>
    		

			<h4 font-size=20px>{{r.overview}}</h4></div>
			<br><br>

    {% endfor %}
</div>
</div>

</article>

<script>
	var $filterCheckboxes = $('input[type="checkbox"]');

$filterCheckboxes.on('change', function() {

  var selectedFilters = {};

  $filterCheckboxes.filter(':checked').each(function() {

    if (!selectedFilters.hasOwnProperty(this.name)) {
      selectedFilters[this.name] = [];
    }

    selectedFilters[this.name].push(this.value);

  });

  // create a collection containing all of the filterable elements
  var $filteredResults = $('.flower');

  // loop over the selected filter name -> (array) values pairs
  $.each(selectedFilters, function(name, filterValues) {

    // filter each .flower element
    $filteredResults = $filteredResults.filter(function() {

      var matched = false,
        currentFilterValues = $(this).data('category').split(' ');

      // loop over each category value in the current .flower's data-category
      $.each(currentFilterValues, function(_, currentFilterValue) {

        // if the current category exists in the selected filters array
        // set matched to true, and stop looping. as we're ORing in each
        // set of filters, we only need to match once

        if ($.inArray(currentFilterValue, filterValues) != -1) {
          matched = true;
          return false;
        }
      });

      // if matched is true the current .flower element is returned
      return matched;

    });
  });

  $('.flower').hide().filter($filteredResults).show();

});

var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
  acc[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.maxHeight){
      panel.style.maxHeight = null;
    } else {
      panel.style.maxHeight = panel.scrollHeight + "px";
    } 
  });
}
</script>




{% endblock %}
